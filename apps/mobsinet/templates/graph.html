{% extends "base.html" %} {% load static %} {% block head %}

<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<link rel="stylesheet" href="{% static 'mobsinet/css/form-style.css' %}" />
<link rel="stylesheet" href="{% static 'mobsinet/css/styles.css' %}" />

{% endblock head %} {% block title %} Graph Visualization {% endblock title %}
{% block header %}
<h1 id="page-title">Simulation Visualization</h1>
{% endblock header %} {% block content %}
<div class="page-content">
  <button onClick="toggleConfigurations()">Show/Hide configurations</button>

  {% include "config-form.html" %}

  <div id="runtime_container">
    <div id="runtime">
      <div id="runtime_panel">
        <button type="button" onClick="initSimulation()">Inicializar</button>
        <span id="initialized" class="confirmation-check">✓</span>

        <label for="simulation_rounds">Rodadas</label>
        <input
          type="number"
          id="simulation_rounds"
          name="simulation_rounds"
          value="{{ project_data.simulation_rounds }}"
          placeholder="Rodadas"
        />

        <label for="simulation_refresh_rate"
          >Taxa de atualização (Rodadas por segundo) (0 para não haver
          limitação)</label
        >
        <input
          type="number"
          id="simulation_refresh_rate"
          name="simulation_refresh_rate"
          value="{{ project_data.simulation_refresh_rate }}"
          placeholder="Taxa de atualização"
        />

        <select
          id="GUI_refresh_rate"
          name="GUI_refresh_rate"
          onchange="changeGUIRefreshRate()"
        >
          <option value="1">1 fps</option>
          <option value="2">2 fps</option>
          <option value="5">5 fps</option>
          <option value="10">10 fps</option>
          <option value="24">24 fps</option>
          <option value="30">30 fps</option>
          <option value="50">50 fps</option>
          <option selected value="60">60 fps</option>
          <option value="75">75 fps</option>
          <option value="100">100 fps</option>
          <option value="120">120 fps</option>
          <option value="144">144 fps</option>
          <option value="200">200 fps</option>
        </select>

        <button onClick="runSimulation()">Rodar</button>
        <button onClick="stopSimulation()">Parar</button>
        <button onMouseDown="showArrows()" onMouseUp="hideArrows()">
          Mostrar setas
        </button>
        <button onMouseDown="showNodesIds()" onMouseUp="hideNodesIds()">
          Mostrar IDs
        </button>
        <div>Time: <span id="time"></span></div>
        <div>
          Mensagens nesta rodada: <span id="numberOfMessagesInThisRound"></span>
        </div>
        <div>
          Total de mensagens enviadas:
          <span id="numberOfMessagesOverAll"></span>
        </div>
        <div class="two-nodes-algorithms">
          <form id="two-nodes-algorithms-form">
            {% csrf_token %}
            <div class="two-nodes-algorithms-inputs-container">
              <div>
                <input
                  type="number"
                  id="two-nodes-algorithms-node-1"
                  name="two-nodes-algorithms-node-1"
                  placeholder="Nó 1"
                />
              </div>
              <div>
                <input
                  type="number"
                  id="two-nodes-algorithms-node-2"
                  name="two-nodes-algorithms-node-2"
                  placeholder="Nó 2"
                />
              </div>
            </div>
            <div>
              <input
                type="text"
                disabled
                id="two-nodes-algorithms-result"
                name="two-nodes-algorithms-result"
                placeholder="Result"
              />
            </div>
            <button type="button" onClick="calculateDistanceBetweenTwoNodes()">
              Distance
            </button>
            <button
              title="The number of edges in the shortest path between two nodes."
              class="white-button"
              type="button"
              onClick="calculateShortestPathBetweenTwoNodes()"
            >
              Shortest path
              <img
                src="{% static 'mobsinet/images/networkx-logo.svg' %}"
                alt="NetworkX logo"
              />
            </button>
          </form>
        </div>
        {% include "networkx-algorithms.html" %}
      </div>

      <div>
        <div id="graph"></div>
        <div class="round_logs">texto</div>
        <button type="button" onClick="clearLogs()" id="clear-logs">
          Limpar logs
        </button>
      </div>
    </div>
  </div>

  <div class="node2vec-container">
    <button type="button" onclick="node2vecAlgorithm()">
      Run Node2Vec algorithm
    </button>

    <div id="node2vec-graph"></div>
  </div>
</div>

<script src="{% static 'mobsinet/js/main.js' %}"></script>
<script src="{% static 'mobsinet/js/networkx-algorithms.js' %}"></script>

{% endblock content %}
